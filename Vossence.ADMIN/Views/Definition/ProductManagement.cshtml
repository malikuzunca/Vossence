@model Tuple<List<SP_Products> ,List<tblCategoryMain>, List<tblTags>, List<tblColors>, List<tblStock>>

@{
    string pathURL = Context.Request.Path.ToString().StartsWith("/") ? Context.Request.Path.ToString().Remove(0, 1) : Context.Request.Path.ToString();
    string cdnURL = ViewBag.CdnURL;
    string topTabCls = "", subTabCls = "", required = "", checkCls = "", checkCls2 = "", catName = "";
    string proCodeStart = ViewBag.ProductCodeStart;
    int topTabRow = 1, subTabRow = 1, iRow = 1;
    bool topTabSelected = false;
}

@{
        <link rel="stylesheet" asp-append-version="true"  href="/vendors/sweetalert2/sweetalert2.css" />
}

<div class="content">
    <div class="mb-9">
        <div class="row g-3 mb-4">
            <div class="col-auto">
                <h2 class="mb-0">Ürün Yönetimi</h2>
            </div>
        </div>
        <ul class="nav nav-links mb-3 mb-lg-2 mx-n3">
            <li class="nav-item"><a class="nav-link active" aria-current="page" href="#"><span>All </span><span class="text-body-tertiary fw-semibold">(@Model.Item1.Count())</span></a></li>
            <li class="nav-item"><a class="nav-link" href="#"><span>Published </span><span class="text-body-tertiary fw-semibold">(70348)</span></a></li>
            <li class="nav-item"><a class="nav-link" href="#"><span>Drafts </span><span class="text-body-tertiary fw-semibold">(17)</span></a></li>
            <li class="nav-item"><a class="nav-link" href="#"><span>On discount </span><span class="text-body-tertiary fw-semibold">(810)</span></a></li>
        </ul>
        <div id="products" data-list='{"valueNames":["product","price","category","tags","vendor","time"],"page":10,"pagination":true}'>
            <div class="mb-4">
                <div class="d-flex flex-wrap gap-3">
                    <div class="search-box">
                        <form class="position-relative">
                            <input class="form-control search-input search" type="search" placeholder="Search products" aria-label="Search" />
                            <span class="fas fa-search search-box-icon"></span>

                        </form>
                    </div>
                    <div class="scrollbar overflow-hidden-y">
                        <div class="btn-group position-static" role="group">
                            <div class="btn-group position-static text-nowrap">
                                <button class="btn btn-phoenix-secondary px-7 flex-shrink-0" type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true" aria-expanded="false" data-bs-reference="parent">
                                    Category<span class="fas fa-angle-down ms-2"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                    <li><a class="dropdown-item" href="#">Another action</a></li>
                                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                                    <li>
                                        <hr class="dropdown-divider" />
                                    </li>
                                    <li><a class="dropdown-item" href="#">Separated link</a></li>
                                </ul>
                            </div>
                            <div class="btn-group position-static text-nowrap">
                                <button class="btn btn-sm btn-phoenix-secondary px-7 flex-shrink-0" type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true" aria-expanded="false" data-bs-reference="parent">
                                    Vendor<span class="fas fa-angle-down ms-2"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                    <li><a class="dropdown-item" href="#">Another action</a></li>
                                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                                    <li>
                                        <hr class="dropdown-divider" />
                                    </li>
                                    <li><a class="dropdown-item" href="#">Separated link</a></li>
                                </ul>
                            </div>
                            <button class="btn btn-sm btn-phoenix-secondary px-7 flex-shrink-0">More filters</button>
                        </div>
                    </div>
                    <div class="ms-xxl-auto">
                        <button class="btn btn-link text-body me-4 px-0"><span class="fa-solid fa-file-export fs-9 me-2"></span>Export</button>
                        <a class="btn btn-info code-btn ms-2 fw-light collapsed arrangementButton" onclick="arrangementUpdate()">Sıralama Güncelle</a>
                        <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#itemCreate" id="addBtn"><span class="fas fa-plus me-2"></span>Add product</button>
                    </div>
                </div>
            </div>
            <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-body-emphasis border-top border-bottom border-translucent position-relative top-1">
                <div class="table-responsive scrollbar mx-n1 px-1">
                    <table class="table fs-9 mb-0">
                        <thead>
                            <tr>
                                <th class="white-space-nowrap fs-9 align-middle ps-0" scope="col">
                                   #
                                </th>
                                <th class="sort align-middle ps-4" scope="col" data-sort="time" style="width:50px;">Ürün Kodu</th>

                                <th class="sort white-space-nowrap align-middle fs-10" scope="col" style="width:70px;"></th>
                                <th class="sort white-space-nowrap align-middle ps-4" scope="col" style="width:200px;" data-sort="product">Ürün Adı</th>
                                <th class="sort align-middle text-end ps-4" scope="col" data-sort="price" style="width:150px;">Fiyat</th>
                                <th class="sort align-middle ps-4" scope="col" data-sort="category" style="width:150px;">Kategori</th>
                                <th class="sort align-middle ps-3" scope="col" data-sort="tags" style="width:250px;">Etiketler</th>
                                <th class="sort align-middle ps-3" scope="col" data-sort="colors" style="width:250px;">Renkler</th>
                                <th class="sort align-middle text-center ps-4" scope="col" style="width:75px;">Vitrin</th>
                                <th class="sort align-middle text-center ps-4" scope="col" style="width:75px;">Durum</th>
                                <th class="sort text-end align-middle pe-0 ps-4" scope="col"></th>
                            </tr>
                        </thead>
                        <tbody class="list" id="products-table-body">
                            @if (Model.Item1.Count() > 0) 
                            { 
                                foreach(var item in Model.Item1)
                                {
                                    <tr class="position-static">
                                        <td class="fs-9 align-middle">
                                           <input type="number" class="form-control form-control-sm w-100 arrangementCls text-center" data-id="@item.ProductID" value="@item.Arrangement" />
                                        </td>
                                        <td class="time align-middle white-space-nowrap text-body-tertiary text-opacity-85 ps-4">@item.ProductCode</td>
                                        <td class="align-middle white-space-nowrap py-0"><img class="d-block border border-translucent rounded-2" src="@cdnURL/Vossence/Default/noImage.jpg" alt="@item.ProductName" width="53"></td>
                                        <td class="product align-middle ps-4"><a class="fw-semibold line-clamp-3 mb-0" onclick="itemGet(@item.ProductID)" data-bs-toggle="modal" data-bs-target="#itemUpdateModal">@item.ProductName</a></td>
                                        <td class="price align-middle white-space-nowrap text-end fw-bold text-body-tertiary ps-4">29₺</td>
                                        <td class="category align-middle white-space-nowrap text-body-quaternary fs-9 ps-4 fw-semibold">@item.CategoryName</td>
                                        <td class="tags align-middle review pb-2 ps-3" style="min-width:225px;">
                                            @{
                                                var tags = new List<string>();
                                                if (!string.IsNullOrEmpty(item.TagNames))
                                                {
                                                    tags = item.TagNames.Split(',', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries).ToList();
                                                }
                                            }
                                            @foreach (var tag in tags)
                                            {
                                                <a class="text-decoration-none tagBadge" href="#!"><span class="badge badge-tag me-2 mb-2">@tag</span></a>
                                            }
                                           
                                        </td>
                                        <td class="colors align-middle review pb-2 ps-3" style="min-width:225px;">
                                            @{
                                                
                                                var colorIDs = item.ColorIDs?.Split(',', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries).ToList() ?? new List<string>();
                                                var colorNames = item.ColorNames?.Split(',', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries).ToList() ?? new List<string>();
                                                var combinedColors = colorIDs.Zip(colorNames, (id, name) => new
                                                {
                                                    ID = id,
                                                    Name = name
                                                });
                                            }

                                            @foreach (var color in combinedColors)
                                            {
                                                <a class="text-decoration-none colorBadge" href="#!" data-color-id="@color.ID" data-color-name="@color.Name">
                                                    <span class="badge badge-tag me-2 mb-2">@color.Name</span>
                                                </a>
                                            }
                                        </td>
                                        <td class="align-middle review text-center ps-4">
                                            <div class="form-check form-switch mx-4">
                                                <input class="form-check-input" onchange="isFeaturedUpdate('@item.ProductID', 'itemFeatured_@item.ProductID')" id="itemFeatured_@item.ProductID" type="checkbox" @checkCls2 />
                                                <label class="form-check-label" for="itemFeatured_@item.ProductID"></label>
                                            </div>
                                        </td>
                                        <td class="align-middle review text-center ps-4">
                                            <div class="form-check form-switch mx-4">
                                                <input class="form-check-input" onchange="isActiveUpdate('@item.ProductID', 'item_@item.ProductID')" id="item_@item.ProductID" type="checkbox" @checkCls />
                                                <label class="form-check-label" for="item_@item.ProductID"></label>
                                            </div>
                                        </td>
                                        <td class="align-middle white-space-nowrap text-end pe-0 ps-4 btn-reveal-trigger">
                                            <div class="btn-reveal-trigger position-static">
                                                <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs-10" type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true" aria-expanded="false" data-bs-reference="parent"><span class="fas fa-ellipsis-h fs-10"></span></button>
                                                <div class="dropdown-menu dropdown-menu-end py-2">
                                                    <a class="dropdown-item" type="button" data-bs-toggle="modal" onclick="getProductID(@item.ProductID)" data-bs-target="#stockModal">Stock hareketleri</a>
                                                    <a class="dropdown-item" type="button" data-bs-toggle="modal" onclick="getProductID(@item.ProductID)" data-bs-target="#stockModalSales">Satış Yap</a>
                                                    <a class="dropdown-item" type="button" data-bs-toggle="modal" onclick="getProductID(@item.ProductID)" data-bs-target="#priceModal">Fiyatlandırma</a>
                                                    <div class="dropdown-divider"></div><a class="dropdown-item text-danger" onclick="itemDelete(@item.ProductID)" href="#!">Kaldır</a>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr class="position-static">
                                    <td class="align-middle ps-4 text-center" colspan="8">Kayıt Bulunamadı.</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="row align-items-center justify-content-between py-2 pe-0 fs-9">
                    <div class="col-auto d-flex">
                        <p class="mb-0 d-none d-sm-block me-3 fw-semibold text-body" data-list-info="data-list-info"></p><a class="fw-semibold" href="#!" data-list-view="*">View all<span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span></a><a class="fw-semibold d-none" href="#!" data-list-view="less">View Less<span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span></a>
                    </div>
                    <div class="col-auto d-flex">
                        <button class="page-link" data-list-pagination="prev"><span class="fas fa-chevron-left"></span></button>
                        <ul class="mb-0 pagination"></ul>
                        <button class="page-link pe-0" data-list-pagination="next"><span class="fas fa-chevron-right"></span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer position-absolute">
        <div class="row g-0 justify-content-between align-items-center h-100">
            <div class="col-12 col-sm-auto text-center">
                <p class="mb-0 mt-2 mt-sm-0 text-body">Thank you for creating with Phoenix<span class="d-none d-sm-inline-block"></span><span class="d-none d-sm-inline-block mx-1">|</span><br class="d-sm-none" />2024 &copy;<a class="mx-1" href="https://themewagon.com">Themewagon</a></p>
            </div>
            <div class="col-12 col-sm-auto text-center">
                <p class="mb-0 text-body-tertiary text-opacity-85">v1.16.0</p>
            </div>
        </div>
    </footer>
</div>

<div class="modal modal-xl fade" id="itemCreate" tabindex="-1" aria-labelledby="itemCreateModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="itemCreateModalLabel">
                    <div class="row g-3 flex-between-end mb-5">
                        <div class="col-auto">
                            <h2 class="mb-2">Ürün ekle</h2>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-phoenix-secondary me-2 mb-2 mb-sm-0" type="button">Yayından Kaldır</button>
                            <button class="btn btn-primary mb-2 mb-sm-0" type="submit">Ürün Yayınla</button>
                        </div>
                    </div>
                </h5>
                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg class="svg-inline--fa fa-xmark fs-9" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg><!-- <span class="fas fa-times fs-9"></span> Font Awesome fontawesome.com --></button>
            </div>
            <form class="mb-9" action="javascript:itemCreate()" method="post" autocomplete="off">
                <div class="modal-body">
                    <div class="content">
                        <div class="row g-5">
                            <div class="col-12 col-xl-8">
                                <h4 class="mb-3">Ürün Adı</h4>
                                <input class="form-control mb-5" id="productName" onblur="urlPrint('productName', 1, 1, '@pathURL')" type="text" placeholder="Ürün adı girin" maxlength="200" required />
                                <h4 class="mb-3">Title</h4>
                                <input class="form-control mb-5" id="title" type="text" placeholder="Title girin"  maxlength="200" required/>
                                <h4 class="mb-3">Description</h4>
                                <input class="form-control mb-5" id="description" type="text" placeholder="Description girin" maxlength="300" required />
                                <div class="mb-6">
                                    <h4 class="mb-3"> Ürün Açıklaması</h4>
                                    <textarea class="tinymce" id="productContent" data-tinymce='{"height":"15rem","placeholder":"Ürün açıklaması girin..."}'></textarea>
                                </div>
                                <h4 class="mb-3">Url</h4>
                                <input class="form-control mb-5" id="url_1" type="text" placeholder="Url girin" maxlength="200" required />
                                @* <h4 class="mb-3">Resimleri yükle</h4>
                                <div class="dropzone dropzone-multiple p-0 mb-5" id="product-dropzone" data-dropzone="data-dropzone">
                                    <div class="fallback">
                                        <input id="productImage" name="file" type="file" multiple="multiple" />
                                    </div>
                                    <div class="dz-preview d-flex flex-wrap">
                                        <div class="border border-translucent bg-body-emphasis rounded-3 d-flex flex-center position-relative me-2 mb-2" style="height:80px;width:80px;"><img class="dz-image" src="@cdnURL/Vossence/Default/logo_a72c8e5c-829b-493a-aa85-1f8e91c6dc1f.png" alt="..." data-dz-thumbnail="data-dz-thumbnail" /><a class="dz-remove text-body-quaternary" href="#!" data-dz-remove="data-dz-remove"><span data-feather="x"></span></a></div>
                                    </div>
                                    <div class="dz-message text-body-tertiary text-opacity-85" data-dz-message="data-dz-message">
                                        Resimlerinizi buraya sürükleyin<span class="text-body-secondary px-1">yada</span>
                                        <button class="btn btn-link p-0" type="button" onclick="document.getElementById('productImage').click();">Cihazdan göz atın</button><br /><img class="mt-3 me-2" src="../../../assets/img/icons/image-icon.png" width="40" alt="" />
                                    </div>
                                </div>
                                <h4 class="mb-3">Envanter</h4>
                                <div class="row g-0 border-top border-bottom">
                                    <div class="col-sm-4">
                                        <div class="nav flex-sm-column border-bottom border-bottom-sm-0 border-end-sm fs-9 vertical-tab h-100 justify-content-between" role="tablist" aria-orientation="vertical">
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center active" id="pricingTab" data-bs-toggle="tab" data-bs-target="#pricingTabContent" role="tab" aria-controls="pricingTabContent" aria-selected="true">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="tag"></span>
                                                <span class="d-none d-sm-inline">Fiyatlandırma</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="restockTab" data-bs-toggle="tab" data-bs-target="#restockTabContent" role="tab" aria-controls="restockTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="package"></span>
                                                <span class="d-none d-sm-inline">Stock Hareketleri</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="shippingTab" data-bs-toggle="tab" data-bs-target="#shippingTabContent" role="tab" aria-controls="shippingTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="truck"></span>
                                                <span class="d-none d-sm-inline">Nakliye</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="productsTab" data-bs-toggle="tab" data-bs-target="#productsTabContent" role="tab" aria-controls="productsTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="globe"></span>
                                                <span class="d-none d-sm-inline">Küresel Teslimat</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="attributesTab" data-bs-toggle="tab" data-bs-target="#attributesTabContent" role="tab" aria-controls="attributesTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="sliders"></span>
                                                <span class="d-none d-sm-inline">Nitelikler</span>
                                            </a>
                                           @*  <a class="nav-link text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="advancedTab" data-bs-toggle="tab" data-bs-target="#advancedTabContent" role="tab" aria-controls="advancedTabContent" aria-selected="false"> 
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="lock"></span>
                                                <span class="d-none d-sm-inline">Gelişmiş</span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="col-sm-8">
                                       
                                    </div>
                                </div> *@
                            </div>
                            <div class="col-12 col-xl-4">
                                <div class="row g-2">
                                    <div class="col-12 col-xl-12">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <h4 class="card-title mb-4">Kategori ve Etiket</h4>
                                                <div class="row gx-3">
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="mb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="mb-0 text-body-highlight me-2">Kategori</h5><a class="fw-bold fs-9" href="category-management">Yeni kategori ekle</a>
                                                            </div>
                                                            <select id="mainCategory" class="form-select mb-3" aria-label="category" onchange="getSubCategories(this.value)">
                                                                <option value="0">Kategori seçiniz</option>
                                                                @foreach (var item in Model.Item2)
                                                                {
                                                                    if(item.CategorySubID == 0)
                                                                    {
                                                                    <option value="@item.CategoryID">@item.CategoryName</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="mb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="mb-0 text-body-highlight me-2">Alt kategori</h5>
                                                            </div>
                                                            <select id="subCategory" class="form-select mb-3" aria-label="category" onchange="getSubSubCategories(this.value)">
                                                                <option value="0">-- Alt Kategori Seç --</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="mb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="mb-0 text-body-highlight me-2">Alt kategori</h5>
                                                            </div>
                                                            <select id="subSubCategory" class="form-select mb-3" aria-label="category">
                                                                <option value="0">-- En Alt Kategori Seç --</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12 mb-4">
                                                        <div class="d-flex flex-wrap mb-2">
                                                            <h5 class="mb-0 text-body-highlight me-2">Renkler</h5>
                                                        </div>
                                                        @foreach (var item in Model.Item4)
                                                        {
                                                            <div class="form-check form-check-inline">

                                                                <input class="form-check-input colorCheck" id="color_@item.ColorID" type="checkbox" value="@item.ColorID">

                                                                <label class="form-check-label" for="color_@item.ColorID">@item.ColorName</label>
                                                            </div>
                                                        }
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="d-flex flex-wrap mb-2">
                                                            <h5 class="mb-0 text-body-highlight me-2">Etiketler</h5>
                                                        </div>
                                                        @foreach(var item in Model.Item3)
                                                        {
                                                            <div class="form-check form-check-inline">

                                                                <input class="form-check-input tagCheck" id="tag_@item.TagID" type="checkbox" value="@item.TagID">

                                                                <label class="form-check-label" for="tag_@item.TagID">@item.TagName</label>
                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @* <div class="col-12 col-xl-12">
                                        <div class="card">
                                            <div class="card-body">
                                                <h4 class="card-title mb-4">Varyantlar</h4>
                                                <div class="row g-3">
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="border-bottom border-translucent border-dashed border-sm-0 border-bottom-xl pb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="text-body-highlight me-2">Seçenek 1</h5><a class="fw-bold fs-9" href="#!">Kaldır</a>
                                                            </div>
                                                            <select class="form-select mb-3">
                                                                <option value="size">Size</option>
                                                                <option value="color">Color</option>
                                                                <option value="weight">Weight</option>
                                                                <option value="smell">Smell</option>
                                                            </select>
                                                            <div class="product-variant-select-menu">
                                                                <select class="form-select mb-3" data-choices="data-choices" multiple="multiple" data-options='{"removeItemButton":true,"placeholder":true}'>
                                                                    <option value="size">4x6 in</option>
                                                                    <option value="color">9x6 in</option>
                                                                    <option value="weight">11x8 in</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="d-flex flex-wrap mb-2">
                                                            <h5 class="text-body-highlight me-2">Seçenek 2</h5><a class="fw-bold fs-9" href="#!">Kaldır</a>
                                                        </div>
                                                        <select class="form-select mb-3">
                                                            <option value="size">Size</option>
                                                            <option value="color">Color</option>
                                                            <option value="weight">Weight</option>
                                                            <option value="smell">Smell</option>
                                                        </select>
                                                        <div class="product-variant-select-menu mb-3">
                                                            <select class="form-select mb-3" data-choices="data-choices" multiple="multiple" data-options='{"removeItemButton":true,"placeholder":true}'>
                                                                <option value="size">4x6 in</option>
                                                                <option value="color">9x6 in</option>
                                                                <option value="weight">11x8 in</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button class="btn btn-phoenix-primary w-100" type="button">Başka bir seçenek ekle</button>
                                            </div>
                                        </div>
                                    </div> *@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary saveButton" type="submit">Kaydet</button>
                    <button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">İptal et</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal modal-xl fade" id="itemUpdateModal" tabindex="-1" aria-labelledby="itemUpdateModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="itemUpdateModalLabel">
                    <div class="row g-3 flex-between-end mb-5">
                        <div class="col-auto">
                            <h2 class="mb-2">Ürün ekle</h2>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-phoenix-secondary me-2 mb-2 mb-sm-0" type="button">Yayından Kaldır</button>
                            <button class="btn btn-primary mb-2 mb-sm-0" type="submit">Ürün Yayınla</button>
                        </div>
                    </div>
                </h5>
                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg class="svg-inline--fa fa-xmark fs-9" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg><!-- <span class="fas fa-times fs-9"></span> Font Awesome fontawesome.com --></button>
            </div>
            <form class="mb-9" action="javascript:itemUpdate()" method="post" autocomplete="off">
                <div class="modal-body">
                    <div class="content">
                        <div class="row g-5">
                            <div class="col-12 col-xl-8">
                                <input type="hidden" id="_productID"/>
                                <h4 class="mb-3">Ürün Adı</h4>
                                <input class="form-control mb-5" id="_productName" onblur="urlPrint('_productName', 1, 1, '@pathURL')" type="text" placeholder="Ürün adı girin" maxlength="200" required />
                                <h4 class="mb-3">Title</h4>
                                <input class="form-control mb-5" id="_title" type="text" placeholder="Title girin" maxlength="200" required />
                                <h4 class="mb-3">Description</h4>
                                <input class="form-control mb-5" id="_description" type="text" placeholder="Description girin" maxlength="300" required />
                                <div class="mb-6">
                                    <h4 class="mb-3"> Ürün Açıklaması</h4>
                                    <textarea class="tinymce" id="_productContent" data-tinymce='{"height":"15rem","placeholder":"Ürün açıklaması girin..."}'></textarea>
                                </div>
                                <h4 class="mb-3">Url</h4>
                                <input class="form-control mb-5" id="_url_1" type="text" placeholder="Url girin" maxlength="200" required />
                                @* <h4 class="mb-3">Resimleri yükle</h4>
                                <div class="dropzone dropzone-multiple p-0 mb-5" id="product-dropzone" data-dropzone="data-dropzone">
                                    <div class="fallback">
                                        <input id="productImage" name="file" type="file" multiple="multiple" />
                                    </div>
                                    <div class="dz-preview d-flex flex-wrap">
                                        <div class="border border-translucent bg-body-emphasis rounded-3 d-flex flex-center position-relative me-2 mb-2" style="height:80px;width:80px;"><img class="dz-image" src="@cdnURL/Vossence/Default/logo_a72c8e5c-829b-493a-aa85-1f8e91c6dc1f.png" alt="..." data-dz-thumbnail="data-dz-thumbnail" /><a class="dz-remove text-body-quaternary" href="#!" data-dz-remove="data-dz-remove"><span data-feather="x"></span></a></div>
                                    </div>
                                    <div class="dz-message text-body-tertiary text-opacity-85" data-dz-message="data-dz-message">
                                        Resimlerinizi buraya sürükleyin<span class="text-body-secondary px-1">yada</span>
                                        <button class="btn btn-link p-0" type="button" onclick="document.getElementById('productImage').click();">Cihazdan göz atın</button><br /><img class="mt-3 me-2" src="../../../assets/img/icons/image-icon.png" width="40" alt="" />
                                    </div>
                                </div>
                                <h4 class="mb-3">Envanter</h4>
                                <div class="row g-0 border-top border-bottom">
                                    <div class="col-sm-4">
                                        <div class="nav flex-sm-column border-bottom border-bottom-sm-0 border-end-sm fs-9 vertical-tab h-100 justify-content-between" role="tablist" aria-orientation="vertical">
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center active" id="pricingTab" data-bs-toggle="tab" data-bs-target="#pricingTabContent" role="tab" aria-controls="pricingTabContent" aria-selected="true">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="tag"></span>
                                                <span class="d-none d-sm-inline">Fiyatlandırma</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="restockTab" data-bs-toggle="tab" data-bs-target="#restockTabContent" role="tab" aria-controls="restockTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="package"></span>
                                                <span class="d-none d-sm-inline">Stock Hareketleri</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="shippingTab" data-bs-toggle="tab" data-bs-target="#shippingTabContent" role="tab" aria-controls="shippingTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="truck"></span>
                                                <span class="d-none d-sm-inline">Nakliye</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="productsTab" data-bs-toggle="tab" data-bs-target="#productsTabContent" role="tab" aria-controls="productsTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="globe"></span>
                                                <span class="d-none d-sm-inline">Küresel Teslimat</span>
                                            </a>
                                            <a class="nav-link border-end border-end-sm-0 border-bottom-sm text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="attributesTab" data-bs-toggle="tab" data-bs-target="#attributesTabContent" role="tab" aria-controls="attributesTabContent" aria-selected="false">
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="sliders"></span>
                                                <span class="d-none d-sm-inline">Nitelikler</span>
                                            </a>
                                           @*  <a class="nav-link text-center text-sm-start cursor-pointer outline-none d-sm-flex align-items-sm-center" id="advancedTab" data-bs-toggle="tab" data-bs-target="#advancedTabContent" role="tab" aria-controls="advancedTabContent" aria-selected="false"> 
                                                <span class="me-sm-2 fs-4 nav-icons" data-feather="lock"></span>
                                                <span class="d-none d-sm-inline">Gelişmiş</span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="col-sm-8">
                                       
                                    </div>
                                </div> *@
                            </div>
                            <div class="col-12 col-xl-4">
                                <div class="row g-2">
                                    <div class="col-12 col-xl-12">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <h4 class="card-title mb-4">Kategori ve Etiket</h4>
                                                <div class="row gx-3">
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="mb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="mb-0 text-body-highlight me-2">Kategori</h5><a class="fw-bold fs-9" href="category-management">Yeni kategori ekle</a>
                                                            </div>
                                                            <select id="_mainCategory" class="form-select mb-3" aria-label="category" onchange="getSubCategories(this.value)">
                                                                <option value="0">Kategori seçiniz</option>
                                                                @foreach (var item in Model.Item2)
                                                                {
                                                                    if (item.CategorySubID == 0)
                                                                    {
                                                                        <option value="@item.CategoryID">@item.CategoryName</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="mb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="mb-0 text-body-highlight me-2">Alt kategori</h5>
                                                            </div>
                                                            <select id="_subCategory" class="form-select mb-3" aria-label="category" onchange="getSubSubCategories(this.value)">
                                                                <option value="0">-- Alt Kategori Seç --</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="mb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="mb-0 text-body-highlight me-2">Alt kategori</h5>
                                                            </div>
                                                            <select id="_subSubCategory" class="form-select mb-3" aria-label="category">
                                                                <option value="0">-- En Alt Kategori Seç --</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12 mb-4">
                                                        <div class="d-flex flex-wrap mb-2">
                                                            <h5 class="mb-0 text-body-highlight me-2">Renkler</h5>
                                                        </div>
                                                        @foreach (var item in Model.Item4)
                                                        {
                                                            <div class="form-check form-check-inline">

                                                                <input class="form-check-input _colorCheck" id="_color_@item.ColorID" type="checkbox" value="@item.ColorID">

                                                                <label class="form-check-label" for="_color_@item.ColorID">@item.ColorName</label>
                                                            </div>
                                                        }
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="d-flex flex-wrap mb-2">
                                                            <h5 class="mb-0 text-body-highlight me-2">Etiketler</h5>
                                                        </div>
                                                        @foreach (var item in Model.Item3)
                                                        {
                                                            <div class="form-check form-check-inline">

                                                                <input class="form-check-input _tagCheck" id="_tag_@item.TagID" type="checkbox" value="@item.TagID">

                                                                <label class="form-check-label" for="_tag_@item.TagID">@item.TagName</label>
                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @* <div class="col-12 col-xl-12">
                                        <div class="card">
                                            <div class="card-body">
                                                <h4 class="card-title mb-4">Varyantlar</h4>
                                                <div class="row g-3">
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="border-bottom border-translucent border-dashed border-sm-0 border-bottom-xl pb-4">
                                                            <div class="d-flex flex-wrap mb-2">
                                                                <h5 class="text-body-highlight me-2">Seçenek 1</h5><a class="fw-bold fs-9" href="#!">Kaldır</a>
                                                            </div>
                                                            <select class="form-select mb-3">
                                                                <option value="size">Size</option>
                                                                <option value="color">Color</option>
                                                                <option value="weight">Weight</option>
                                                                <option value="smell">Smell</option>
                                                            </select>
                                                            <div class="product-variant-select-menu">
                                                                <select class="form-select mb-3" data-choices="data-choices" multiple="multiple" data-options='{"removeItemButton":true,"placeholder":true}'>
                                                                    <option value="size">4x6 in</option>
                                                                    <option value="color">9x6 in</option>
                                                                    <option value="weight">11x8 in</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-xl-12">
                                                        <div class="d-flex flex-wrap mb-2">
                                                            <h5 class="text-body-highlight me-2">Seçenek 2</h5><a class="fw-bold fs-9" href="#!">Kaldır</a>
                                                        </div>
                                                        <select class="form-select mb-3">
                                                            <option value="size">Size</option>
                                                            <option value="color">Color</option>
                                                            <option value="weight">Weight</option>
                                                            <option value="smell">Smell</option>
                                                        </select>
                                                        <div class="product-variant-select-menu mb-3">
                                                            <select class="form-select mb-3" data-choices="data-choices" multiple="multiple" data-options='{"removeItemButton":true,"placeholder":true}'>
                                                                <option value="size">4x6 in</option>
                                                                <option value="color">9x6 in</option>
                                                                <option value="weight">11x8 in</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button class="btn btn-phoenix-primary w-100" type="button">Başka bir seçenek ekle</button>
                                            </div>
                                        </div>
                                    </div> *@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary saveButton" type="submit">Güncelle</button>
                    <button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">İptal et</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="stockModal" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="stockModalLabel">Stock hareketleri</h5>
                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg class="svg-inline--fa fa-xmark fs-9" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg><!-- <span class="fas fa-times fs-9"></span> Font Awesome fontawesome.com --></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-column h-100">
                    <h5 class="mb-3 text-body-highlight">Stok Ekle</h5>
                    <form action="javascript:stockUpdate()" method="post" autocomplete="off">
                        <div class="row g-3 flex-1 mb-4">
                            <input class="hidden" type="hidden" id="__productID"/>
                            <input class="hidden" type="hidden" id="_stockID" />
                            <div class="col-sm-6">
                                <select class="form-select mb-3" id="_stockColors">
                                    <option value="0">Renk seç</option>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <input class="form-control" id="stockQuantity" type="number" placeholder="Miktar" />
                            </div>
                            <div class="col-sm-3">
                                <input class="form-control" id="stockPrice" type="number" placeholder="Birim fiyat" />
                            </div>
                            <div class="col-sm-6">
                                <textarea class="form-control" id="message" placeholder="Not yazınız" style="height: 70px"></textarea>
                            </div>
                            <div class="col-sm">
                                <button class="btn btn-primary saveButton" type="submit">Kaydet</button>
                            </div>
                        </div>
                    </form>

                    <table>
                        <thead>
                            <tr>
                                <th style="width: 200px;"></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Ürün şu anda stokta:</td>
                                <td class="text-body-tertiary fw-semibold py-1">
                                    $1,090
                                    <button class="btn p-0" type="button"><span class="fa-solid fa-rotate text-body ms-1" style="--phoenix-text-opacity: .6;"></span></button>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Son stok yenileme tarihi:</td>
                                <td class="text-body-tertiary fw-semibold py-1">30th June, 2021</td>
                            </tr>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Ömür boyu toplam stok:</td>
                                <td class="text-body-tertiary fw-semibold py-1">20,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            @* <div class="modal-footer">
                <button class="btn btn-primary" type="button">Okay</button>
                <button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button>
            </div> *@
        </div>
    </div>
</div>
<div class="modal fade" id="stockModalSales" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="stockModalSalesLabel">Satış Ekranı</h5>
                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg class="svg-inline--fa fa-xmark fs-9" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg><!-- <span class="fas fa-times fs-9"></span> Font Awesome fontawesome.com --></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-column h-100">
                    <h5 class="mb-3 text-body-highlight">Satış Bilgisi</h5>
                    <form action="javascript:salesUpdate()" method="post" autocomplete="off">
                        <div class="row g-3 flex-1 mb-4">
                            <input class="hidden" type="hidden" id="___productID" />
                            <input class="hidden" type="hidden" id="__stockID" />
                            <div class="col-sm-6">
                                <select class="form-select mb-3" id="__stockColors">
                                    <option value="0">Renk seç</option>
                                </select>
                            </div>
                            <div class="col-sm-6">
                                <input class="form-control" id="_stockQuantity" type="number" placeholder="Miktar" />
                            </div>
                            <div class="col-sm-12">
                                <textarea class="form-control" id="_message" placeholder="Not yazınız" style="height: 70px"></textarea>
                            </div>
                            <div class="col-sm">
                                <button class="btn btn-primary saveButton" type="submit">Onayla</button>
                            </div>
                        </div>
                    </form>

                    <table>
                        <thead>
                            <tr>
                                <th style="width: 200px;"></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Ürün şu anda stokta:</td>
                                <td class="text-body-tertiary fw-semibold py-1">
                                    $1,090
                                    <button class="btn p-0" type="button"><span class="fa-solid fa-rotate text-body ms-1" style="--phoenix-text-opacity: .6;"></span></button>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Son stok yenileme tarihi:</td>
                                <td class="text-body-tertiary fw-semibold py-1">30th June, 2021</td>
                            </tr>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Ömür boyu toplam stok:</td>
                                <td class="text-body-tertiary fw-semibold py-1">20,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            @* <div class="modal-footer">
                <button class="btn btn-primary" type="button">Okay</button>
                <button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button>
            </div> *@
        </div>
    </div>
</div>
<div class="modal fade" id="priceModal" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="priceModalLabel">Fiyat hareketleri</h5>
                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg class="svg-inline--fa fa-xmark fs-9" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg><!-- <span class="fas fa-times fs-9"></span> Font Awesome fontawesome.com --></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-column h-100">
                    <form action="javascript:priceUpdate()" method="post" autocomplete="off">
                        <input type="hidden" id="priceProductID" />
                        <div class="row g-3 flex-1 mb-4">
                            <div class="col-sm-7">
                                <input class="form-control" id="salePrice" type="number" placeholder="Satış fiyatı" />
                            </div>
                            <div class="col-sm">
                                <button class="btn btn-primary saveButton" type="submit">Kaydet</button>
                            </div>
                        </div>
                    </form>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 200px;"></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Ürün şu anda stokta:</td>
                                <td class="text-body-tertiary fw-semibold py-1">
                                    $1,090
                                    <button class="btn p-0" type="button"><span class="fa-solid fa-rotate text-body ms-1" style="--phoenix-text-opacity: .6;"></span></button>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Son stok yenileme tarihi:</td>
                                <td class="text-body-tertiary fw-semibold py-1">30th June, 2021</td>
                            </tr>
                            <tr>
                                <td class="text-body-highlight fw-bold py-1">Ömür boyu toplam stok:</td>
                                <td class="text-body-tertiary fw-semibold py-1">20,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            @* <div class="modal-footer">
                <button class="btn btn-primary" type="button">Okay</button>
                <button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button>
            </div> *@
        </div>
    </div>
</div>
@section Scripts {
    <script asp-append-version="true" src="/vendors/sweetalert2/sweetalert2.js"></script>
    <script asp-append-version="true" src="/vendors/tinymce/tinymce.min.js"></script>
    <script>
        function getSubCategories(categoryId) {
            
            $("#subCategory").empty().append('<option value="0">-- Alt Kategori Seç --</option>');
            $("#subSubCategory").empty().append('<option value="0">-- En Alt Kategori Seç --</option>');
            $("#_subCategory").empty().append('<option value="0">-- Alt Kategori Seç --</option>');
            $("#_subSubCategory").empty().append('<option value="0">-- En Alt Kategori Seç --</option>');
            $.ajax({
                url: "/product-cat-get",
                type: "GET",
                data: { categoryID: categoryId },
                success: function (response) {
                    // response Tuple geldiği için içinde categorySubMain var
                    var data = response;
                    $("#subCategory").empty().append('<option value="0">-- Alt Kategori Seç --</option>');
                    $("#_subCategory").empty().append('<option value="0">-- Alt Kategori Seç --</option>');

                    $.each(data, function (i, category) {
                        $("#subCategory").append('<option value="' + category.categoryID + '">' + category.categoryName + '</option>');
                        $("#_subCategory").append('<option value="' + category.categoryID + '">' + category.categoryName + '</option>');

                    });
                },
                error: function () {
                    alert("Alt kategoriler yüklenirken hata oluştu!");
                }
            });
        }

        function getSubSubCategories(categoryId) {
           
            $("#subSubCategory").empty().append('<option value="0">-- En Alt Kategori Seç --</option>');
            $("#_subSubCategory").empty().append('<option value="0">-- En Alt Kategori Seç --</option>');

            $.ajax({
                url: "/product-cat-get",
                type: "GET",
                data: { categoryID: categoryId },
                success: function (response) {
                    var data = response;

                    $("#subSubCategory").empty().append('<option value="0">-- En Alt Kategori Seç --</option>');
                    $("#_subSubCategory").empty().append('<option value="0">-- En Alt Kategori Seç --</option>');

                    $.each(data, function (i, category) {
                        $("#subSubCategory").append('<option value="' + category.categoryID + '">' + category.categoryName + '</option>');
                        $("#_subSubCategory").append('<option value="' + category.categoryID + '">' + category.categoryName + '</option>');

                    });
                }
            });
        }

        function itemCreate(){
            let productID = 0;
            let productName = $("#productName").val();
            let title = $("#title").val();
            let description = $("#description").val();
            let productContent = tinymce.get("productContent").getContent();
            let url = $("#url_1").val();
            let subCat = $("#subCategory").val();
            let subSubCat = $("#subSubCategory").val();
            let mainCat = $("#mainCategory").val();

            let tags = [];
            let colors = [];
            $(".tagCheck:checked").each(function () {
                tags.push($(this).attr("value"));
            });
             $(".colorCheck:checked").each(function () {
                colors.push($(this).attr("value"));
            });

            spinnerApp("saveButton");

            $.ajax({
                type:"POST",
                url: "/product-app",
                data: {
                    productID : productID,
                    productName: productName,
                    title: title,
                    description: description,
                    productContent: productContent,
                    url: url,
                    mainCat: mainCat,
                    subCat: subCat,
                    subSubCat: subSubCat,
                    tags: tags,
                    colors: colors
                },
                datatype: "html",
                success: function (result){
                    if(result.resultType ===1)
                        window.location.reload()
                    else {
                        spinnerRemove("saveButton", "Kaydet");
                        newToast(result.resultCaption, result.resultMessage, "error");
                    }
                },
                 error: function () {
                    spinnerRemove('saveButton', "Kaydet");
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                }
            })
        }

        function itemGet(productID) {
            let productName = $("#_productName").val("");
            let title = $("#_title").val("");
            let description = $("#_description").val("");
            let productContent = tinymce.get("_productContent").setContent("");
            let url = $("#_url_1").val("");
           
            $.ajax({
                type: "Get",
                url: "/product-get",
                data: { productID: productID },
                contentType: "application/json; charset=utf-8",
                success: function (result) {
               
                const selectedTags = (result.item3.map(t => t.tagID) || []);
                const selectedColors = (result.item4.map(c => c.colorID) || []);

                $('._tagCheck[type="checkbox"]').each(function() {
                    const tagId = parseInt($(this).val());

                    if (selectedTags.includes(tagId)) {
                    $(this).prop('checked', true);
                    } else {
                    $(this).prop('checked', false);
                    }
                });

                $('._colorCheck[type="checkbox"]').each(function() {
                    const colorID = parseInt($(this).val());

                    if (selectedColors.includes(colorID)) {
                    $(this).prop('checked', true);
                    } else {
                    $(this).prop('checked', false);
                    }
                });
                if (result.item1 != null) {
                    $("#_productID").val(result.item1.productID)
                    productName.val(result.item1.productName)
                }
                if(result.item2 != null){
                    title.val(result.item2.title);
                    description.val(result.item2.description);
                    tinyMCE.get('_productContent').setContent(result.item2.productContent != null ? result.item2.productContent : "");
                    url.val(result.item2.url);
                }
                if(result.item4 != null){
                    $("#_stockColors").empty();
                    $("#__stockColors").empty();
                    $.each(result.item4, function (i, color) {
                        $("#_stockColors").append('<option value="' + color.colorID + '">' + color.colorName + '</option>');
                        $("#__stockColors").append('<option value="' + color.colorID + '">' + color.colorName + '</option>');
                    });
                }
                if(result.item5 != null){
                     $("#_stockID").val("");
                     $("#__stockID").val("");
                    $.each(result.item5, function (i, color) {
                        $("#_stockID").val(color.stockID);
                        $("#__stockID").val(color.stockID);
                    });
                }
                },
                error: function () {
                    alert("Hata");
                }
            });
            
        }

        function getProductID(productID){
            itemGet(productID);
            $("#__productID").val(productID);
            $("#___productID").val(productID);
            $("#priceProductID").val(productID);
        }

        function itemUpdate(){
            let productID = $("#_productID").val();
            let productName = $("#_productName").val();
            let title = $("#_title").val();
            let description = $("#_description").val();
            let productContent = tinymce.get("_productContent").getContent();
            let url = $("#_url_1").val();

            let subCat = $("#_subCategory").val();
            let subSubCat = $("#_subSubCategory").val();
            let mainCat = $("#_mainCategory").val();

            let tags = [];
            let colors = [];
            $("._tagCheck:checked").each(function () {
                tags.push($(this).attr("value"));
            });
             $("._colorCheck:checked").each(function () {
                colors.push($(this).attr("value"));
            });

            spinnerApp("saveButton");

            $.ajax({
                type:"POST",
                url: "/product-app",
                data: {
                    productID : productID,
                    productName: productName,
                    title: title,
                    description: description,
                    productContent: productContent,
                    url: url,
                    mainCat: mainCat,
                    subCat: subCat,
                    subSubCat: subSubCat,
                    tags: tags,
                    colors: colors
                },
                datatype: "html",
                success: function (result){
                    if(result.resultType ===1)
                        window.location.reload()
                    else {
                        spinnerRemove("saveButton", "Kaydet");
                        newToast(result.resultCaption, result.resultMessage, "error");
                    }
                },
                 error: function () {
                    spinnerRemove('saveButton', "Kaydet");
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                }
            })
        }

        function stockUpdate(){
            let stockID = $("#_stockID").val();
            let productID = $("#__productID").val();
            let colorID = $("#_stockColors").val();
            let quantity = $("#stockQuantity").val();
            let price = $("#stockPrice").val();
            let message = $("#message").val();
            if(stockID == ""){
                stockID = 0;
            }
            spinnerApp("saveButton");

            $.ajax({
                type:"POST",
                url: "/product-stock-process",
                data: {
                    stockID : stockID,
                    productID : productID,
                    colorID: colorID,
                    quantity: quantity,
                    price: price,
                    message: message
                },
                datatype: "html",
                success: function (result){
                    if(result.resultType ===1)
                        window.location.reload()
                    else {
                        spinnerRemove("saveButton", "Kaydet");
                        newToast(result.resultCaption, result.resultMessage, "error");
                    }
                },
                 error: function () {
                    spinnerRemove('saveButton', "Kaydet");
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                }
            })
        }

        function salesUpdate(){
            let stockID = $("#__stockID").val();
            let productID = $("#___productID").val();
            let colorID = $("#__stockColors").val();
            let quantity = $("#_stockQuantity").val();
            let message = $("#_message").val();

            spinnerApp("saveButton");

            $.ajax({
                type:"POST",
                url: "/product-sales-process",
                data: {
                    stockID : stockID,
                    productID : productID,
                    colorID: colorID,
                    quantity: quantity,
                    message: message
                },
                datatype: "html",
                success: function (result){
                    if(result.resultType ===1)
                        window.location.reload()
                    else {
                        spinnerRemove("saveButton", "Kaydet");
                        newToast(result.resultCaption, result.resultMessage, "error");
                    }
                },
                 error: function () {
                    spinnerRemove('saveButton', "Kaydet");
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                }
            })
        }

        function priceUpdate(){
            let salePrice = $("#salePrice").val();
            let productID = $("#priceProductID").val();

            spinnerApp("saveButton");

            $.ajax({
                type:"POST",
                url: "/product-price-process",
                data: {
                    productID : productID,
                    salePrice: salePrice
                },
                datatype: "html",
                success: function (result){
                    if(result.resultType ===1)
                        window.location.reload()
                    else {
                        spinnerRemove("saveButton", "Kaydet");
                        newToast(result.resultCaption, result.resultMessage, "error");
                    }
                },
                 error: function () {
                    spinnerRemove('saveButton', "Kaydet");
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                }
            })
        }

        function isFeaturedUpdate(productID, checkID) {
            $.ajax({
                type: "POST",
                url: "/product-process",
                data: { processType: 3, productID: productID },
                datatype: "html",
                success: function (result) {
                    if (result.resultType === 1) {
                        newToast(result.resultCaption, result.resultMessage, "success");
                    }
                    else {
                        newToast(result.resultCaption, result.resultMessage, "error");
                        checkReturn(checkID);
                    }
                },
                error: function () {
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                    checkReturn(checkID);
                }
            });
        }

        function isActiveUpdate(productID, checkID) {
            $.ajax({
                type: "POST",
                url: "/product-process",
                data: { processType: 1, productID: productID },
                datatype: "html",
                success: function (result) {
                    if (result.resultType === 1) {
                        newToast(result.resultCaption, result.resultMessage, "success");
                    }
                    else {
                        newToast(result.resultCaption, result.resultMessage, "error");
                        checkReturn(checkID);
                    }
                },
                error: function () {
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                    checkReturn(checkID);
                }
            });
        }

        function arrangementUpdate() {
            let arrangementBody = "";
            spinnerApp('arrangementButton');

            $('.arrangementCls').each(function () {
                arrangementBody += $(this).attr("data-id") + "," + $(this).val() + "_";
            });

            $.ajax({
                type: "POST",
                url: "/product-arrangement-update",
                data: { arrangementBody: arrangementBody },
                datatype: "html",
                success: function (result) {
                    if (result.resultType === 1)
                        window.location.reload()
                    else {
                        spinnerRemove('arrangementButton', "Sıralama Güncelle");
                        newToast(result.resultCaption, result.resultMessage, "error");
                    }
                },
                error: function () {
                    spinnerRemove('arrangementButton', "Sıralama Güncelle");
                    newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.", "error");
                }
            });
        }

        function itemDelete(productID) {
            Swal.fire({
                title: 'Uyarı',
                text: "Kayıt Silinecek Emin misiniz?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Evet',
                cancelButtonText: 'Hayır',
                customClass: {
                    confirmButton: 'btn btn-primary me-3',
                    cancelButton: 'btn btn-danger'
                },
                buttonsStyling: false
            }).then(function (result) {
                if (result.value) {
                    spinnerApp('swal2-confirm');
                    $.ajax({
                        type: "POST",
                        url: "/product-process",
                        data: { processType: 2, productID: productID },
                        datatype: "html",
                        success: function (result) {
                            spinnerRemove('swal2-confirm', 'Evet');
                            if (result.resultType === 1)
                                window.location.reload();
                            else {
                                spinnerRemove('swal2-confirm', 'Evet');
                                newToast("Hata", result);
                            }
                        },
                        error: function () {
                            spinnerRemove('swal2-confirm', 'Evet');
                            newToast("Hata", "Bir hata oluştu lütfen sistem yöneticinize başvurun.");
                        }
                    });
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    Swal.fire({
                        title: 'Uyarı',
                        text: 'İşlemi iptal ettiniz.',
                        icon: 'error',
                        customClass: { confirmButton: 'btn btn-primary' }
                    });
                }
            });
        }
    </script>

}